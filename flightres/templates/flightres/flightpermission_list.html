{% extends 'flightres/base.html' %}
{% load static %}

{% block body %}

    <main class="admin-main">
        <div class="main-card">
            <div class="card-header">
                <h1>FLIGHT PERMISSION / MANAGE FLIGHT PERMISSION</h1>
            </div>
            <div class="card-body">
                <table id="admin-datatable" class="admin-datatable">
                    <thead>

                    <tr>
                        <th class="serial-th">SN</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Permission Details</th>
                        <th>Pilot Name</th>
                        <th>Flight Location</th>
                        <th>Status</th>
                        <th class="modal-th"></th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for object in object_list %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>
                                <time>{{ object.flight_start_date }}</time>
                            </td>
                            <td>
                                <time>{{ object.flight_end_date }}</time>
                            </td>
                            <td><b>Permission detail {{ object.uav_uid }}</b></td>
                            <td>{{ object.pilot_name }}</td>
                            <td>Latitude: {{ object.latitude }} Longitude: {{ object.longitude }}</td>
                            {% if object.status == 'Approved' %}
                                <td><span class="status approved">{{ object.status }}</span></td>
                            {% elif object.status == 'Rejected' %}
                                <td><span class="status failed">{{ object.status }}</span></td>
                            {% else %}
                                <td><span class="status pending">{{ object.status }}</span></td>
                            {% endif %}
                            <td class="table-action">
                                <button data-toggle="modal" data-target="#open-modal"
                                        modal-link="open-modal" type="button"
                                        class="btn modal-link">
                                    <i class="material-icons">chevron_right</i></i>
                                </button>
                                <div class="popup" id="open-modal">
                                    <div class="popup-container lg-popup map-popup">
                                        <div class="popup-body">
                                            <span class="close-icon"><i class="material-icons">close</i></span>
                                            <div class="popup-header">
                                                <h3>Permission Request for <b>ID 1234</b></h3>

                                            </div>
                                            <div class="popup-content">
                                                <div class="drone-details">
                                                    <div class="row gx-md-3 gx-lg-3">
                                                        <div class="col-xl-5 col-sm-12">
                                                            <div class="drone-content col-left">
                                                                <ul>
                                                                    <li>
                                                                        <h4>Operators info</h4>
                                                                        <div class="content-list">
                                                                            <p><b>Name</b><span>Ram Thapa</span></p>
                                                                            <p><b>License ID</b><span>ID 1234</span></p>
                                                                            <p><b>Operator Type</b><span>Omega</span>
                                                                            </p>
                                                                        </div>
                                                                    </li>
                                                                    <li>
                                                                        <h4>Flight info</h4>
                                                                        <div class="content-list">
                                                                            <p><b>Name</b><span>Ram Thapa</span></p>
                                                                            <p><b>License ID</b><span>ID 1234</span></p>
                                                                            <p><b>Operator Type</b><span>Omega</span>
                                                                            </p>
                                                                        </div>
                                                                    </li>
                                                                    <li>
                                                                        <h4>Pilot info</h4>
                                                                        <div class="content-list">
                                                                            <p><b>Drone type</b><span>Phantom</span></p>
                                                                            <p><b>Drone License
                                                                                ID</b><span>ID 1234</span></p>
                                                                        </div>
                                                                    </li>
                                                                </ul>
                                                            </div>

                                                        </div>
                                                        <div class="col-xl-7 col-sm-12">
                                                            <div class="map-content col-right">
                                                                <div class="custom-tab">
                                                                    <ul class="tab-list is-bg">
                                                                        <li><a href="#location" class="current">Location
                                                                            Map</a></li>
                                                                        <li><a href="#flight">Flight Plan</a></li>
                                                                        <li><a href="#img-gallery">images</a></li>
                                                                    </ul>
                                                                </div>
                                                                <div class="tab-content-holder" id="location">
                                                                    <div id="map" class="map"></div>
                                                                </div>
                                                                <div class="tab-content-holder" id="flight">
                                                                    <div id="map" class="map"></div>
                                                                </div>
                                                                <div class="tab-content-holder" id="img-gallery">
                                                                    <div class="row g-2">
                                                                        <div class="col-md-4">
                                                                            <figure><img src="./img/img-gallery1.png"
                                                                                         alt="img"></figure>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <figure><img src="./img/img-gallery2.png"
                                                                                         alt="img"></figure>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <figure><img src="./img/img-gallery3.png"
                                                                                         alt="img"></figure>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <figure><img src="./img/img-gallery4.png"
                                                                                         alt="img"></figure>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <figure><img src="./img/img-gallery5.png"
                                                                                         alt="img"></figure>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <figure><img src="./img/img-gallery6.png"
                                                                                         alt="img"></figure>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="buttons is-end">
                                                                    <button type=""
                                                                            class="common-button is-border cancel-button">
                                                                        Deny
                                                                    </button>
                                                                    <button type="submit" class="common-button is-bg">
                                                                        Approve
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="popup-footer popup-permission">
                                                <!-- <button type="" class="common-button is-border cancel-button">Dany</button>
                                                <button type="submit" class="common-button is-bg">Approved</button> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

    </main>

    <script type="text/javascript">
        {% for object in object_list %}
            let lat = '{{ object.latitude|safe }}';
            let long = '{{ object.longitude|safe }}';
        {% endfor %}
    </script>
    <script src="{% static 'js/map.js' %}"></script>


{% endblock body %}